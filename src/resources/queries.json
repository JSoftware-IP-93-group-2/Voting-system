{   
    "FalsificationRouter" : {
        "path" : "/falsification",
        "routes" : {
            "create" : { "query" : "INSERT INTO falsifications VALUES (default, 1$, 2$, 3$, 4$);", "order" : ["author_user_id", "voting_id", "title", "description"], "type" : "post", "path" :  "/create" }, 
            "getInfo" : { "query" : "SELECT * FROM falsifications WHERE falsification_id = $1;", "order" : ["falsification_id"], "type" : "get", "path" :  "/:idFalsification" },
            "getAll" : { "query" : "SELECT * FROM falsifications;", "order" : [], "type" : "get", "path" :  "/all" }
        }
    },
    "PetitionRouter" : {
        "path" : "/petition",
        "routes" : {
            "getInfo" : { "query" : "SELECT * FROM petitions WHERE petition_id  = $1;", "order" :  ["petition_id"], "type" : "get", "path" : "/:idPetition" },
                "getAll" : { "query" : "SELECT * FROM petitions ORDER BY start_date DESC;", "order" :  [], "type" : "get", "path" : "/all" },
                "create" : { "query" : "INSERT INTO petitions VALUES (default, $1, $2, $3, $4, $5);", "order" :  ["name", "description", "author_user_id", "start_date", "end_date"], "type" : "post", "path" : "/create" },
                "result" : { "query" : "SELECT petitions.name, count(petitions.petition_id) AS votes FROM petitions INNER JOIN petition_results ON petitions.petition_id = petition_results.petition_id WHERE petitions.petition_id = $1 GROUP BY petitions.name ORDER BY votes DESC;", "order" :  ["petition_id"], "type" : "get", "path" : "/:idPetition/resultGeneral" },
                "resultDistrict" : { "query" : "SELECT d.name, count(u.name) AS votes FROM users u INNER JOIN petition_results pr ON pr.user_id = u.user_id INNER JOIN petitions p ON p.petition_id = pr.petition_id INNER JOIN districts d ON u.district_id = d.district_id WHERE p.petition_id = $1 AND d.district_id = $2 GROUP BY d.name ORDER BY votes DESC;", "order" :  ["petition_id", "district_id"], "type" : "get", "path" : "/:idPetition/resultDistrict" },
                "resultRegion" : { "query" : "SELECT r.name, count(u.name) AS votes FROM users AS u INNER JOIN petition_results pr ON pr.user_id = u.user_id INNER JOIN petitions p  ON p.petition_id = pr.petition_id INNER JOIN districts d ON u.district_id = d.district_id INNER JOIN regions r ON r.region_id = d.region_id WHERE p.petition_id = $1 AND r.region_id = $2 GROUP BY r.name ORDER BY votes DESC;", "order" : ["petition_id", "region_id"], "type" : "get", "path" : "/:idPetition/resultRegion" },
                "vote" : { "query" : "INSERT INTO petition_results VALUES ($1, $2);", "order" :  ["user_id", "petition_id"], "type" : "get", "path" : "/:idPetition/vote" }
                }
    },
    "UserRouter" : {
        "path" : "/petition",
        "routes" : {
            "register" : { "query" : "INSERT INTO users VALUES (default, $1, $2, $3, $4, $5, $6, $7, $8);", "order" :  ["name", "surname", "birthday_date", "gender", "district_id", "email", "password", "status"], "type" : "post", "path" : "/register" },
            "login" : { "query" : "SELECT * FROM users WHERE users.email = $1 AND users.password = $2;", "order" :  ["email", "password"], "type" : "post", "path" : "/login" },
            "updateStatus" : { "query" : "UPDATE users SET status = $1 WHERE user_id = $2;", "order" :  ["status", "user_id"], "type" : "put", "path" : "/updateStatus" }        }
    },
    "VotingRouter" : {
        "path" : "/petition",
        "routes" : {
            "create": { "query" : "INSERT INTO votings VALUES (default, $1, $2, $3, $4);", "order" :  ["name", "description", "start_date", "end_date"], "type" : "post", "path" : "/create" },
                "getInfo" : { "query" : "SELECT * FROM votings WHERE voting_id  = $1;", "order" :  ["voting_id"], "type" : "get", "path" : "/:idVoting" },
                "getVariants" : { "query" : "SELECT * FROM variants WHERE voting_id = $1", "order" :  ["voting_id"], "type" : "get", "path" : "/:idVoting/variants" },
                "getAll" : { "query" : "SELECT * FROM votings ORDER BY start_date DESC;", "order" :  [], "type" : "get", "path" : "/all" },
                "getCurrent" : { "query" : "SELECT * FROM votings WHERE (start_date < NOW() AND NOW() < end_date);", "order" :  [], "type" : "get", "path" : "/current" },
                "result" : { "query" : "SELECT variants.name, COUNT(voting_results.user_id) AS votes FROM voting_results INNER JOIN variants ON voting_results.variant_id = variants.variant_id WHERE voting_results.voting_id = $1 GROUP BY variants.name ORDER BY votes DESC;", "order" :  ["voting_id"], "type" : "get", "path" : "/:idVoting/resultGeneral" },
                "resultDistrict" : { "query" : "SELECT var.name, COUNT(vr.variant_id) AS num_voters FROM voting_results vr LEFT JOIN users u ON u.user_id=vr.user_id LEFT JOIN variants var ON var.variant_id = vr.variant_id WHERE vr.voting_id = $1 AND u.district_id = $2 GROUP BY var.name ORDER by num_voters DESC;", "order" :  ["voting_id", "district_id"], "type" : "get", "path" : "/:idVoting/resultDistrict" }
        }
    }
}